INCLUDE_DIRECTORIES(
    BEFORE .
)

SET(XTool_SRCS
    xmath.cpp
    XBUFFER/XBCNVIN.CPP
    XBUFFER/XBCNVOUT.CPP
    XBUFFER/XBCORE.CPP
    XBUFFER/XBSEARCH.CPP
    XSTREAM/XSCNVOUT.CPP
    XSTREAM/XSINPUT.CPP
    XSTREAM/XSSERV.CPP
    XSTREAM/XSRDWR.CPP
    XSTREAM/XSCNVIN.CPP
    XSTREAM/XSENLV.CPP
    XSTREAM/XSCORE.CPP
    XSTREAM/XSOUTPUT.CPP
    xerrhand.cpp
    XUTIL/XUTIL.CPP
    XUTIL/XClock.cpp
)

SET(XTool_LINK_LIBS)
IF(NOT PERIMETER_WINDOWS)
    SET(XTool_LINK_LIBS ${XTool_LINK_LIBS}
        # dl is required for dladdr in stacktrace,
        dl
    )
ENDIF()

ADD_LIBRARY(XTool STATIC ${XTool_SRCS})
TARGET_LINK_LIBRARIES(XTool ${XTool_LINK_LIBS})
